{"ast":null,"code":"var _jsxFileName = \"/Users/scott/Desktop/io.blueninja.volet_admin/client/src/screens/index.js\";\nimport React, { Component } from \"react\";\nimport Login from \"./Login/index\";\nimport { loginNow, logoutNow } from \"../actions/actions\";\nimport App from \"./App/index\";\nimport { connect } from \"react-redux\";\nimport { url } from \"../config\";\n\nclass index extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    let receivedToken = localStorage.getItem(\"user_token\");\n    this.setState({\n      token: receivedToken\n    });\n\n    try {\n      if (receivedToken !== null) {\n        fetch(\"\".concat(url, \"/api/admin/me\"), {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": \"\".concat(receivedToken),\n            Authorization: \"Bearer \".concat(receivedToken)\n          }\n        }).then(res => res.json()).then(data => {\n          if (data.success === true) {\n            alert(data.message);\n            this.props.loginNow();\n          }\n        }).catch(err => console.log(err));\n      } else if (receivedToken === null) {\n        return React.createElement(Login, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        });\n      }\n    } catch (error) {\n      console.log(error, \"this is an error\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, this.props.login === true ? React.createElement(App, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }) : React.createElement(Login, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }));\n  }\n\n}\n/**\n|--------------------------------------------------\n| calls the login state from the login reducer\n|--------------------------------------------------\n*/\n\n\nconst mapStateToProps = state => {\n  return {\n    login: state.login.isLoggedIn\n  };\n};\n/**\n|--------------------------------------------------\n| connects the state and dispatch to the screen index\n|--------------------------------------------------\n*/\n\n\nexport default connect(mapStateToProps, {\n  loginNow,\n  logoutNow\n})(index);","map":{"version":3,"sources":["/Users/scott/Desktop/io.blueninja.volet_admin/client/src/screens/index.js"],"names":["React","Component","Login","loginNow","logoutNow","App","connect","url","index","constructor","props","state","token","componentDidMount","receivedToken","localStorage","getItem","setState","fetch","method","headers","Authorization","then","res","json","data","success","alert","message","catch","err","console","log","error","render","login","mapStateToProps","isLoggedIn"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,GAAT,QAAoB,WAApB;;AAEA,MAAMC,KAAN,SAAoBP,SAApB,CAA8B;AAC5BQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE;AADI,KAAb;AAGD;;AAED,QAAMC,iBAAN,GAA0B;AACxB,QAAIC,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAApB;AACA,SAAKC,QAAL,CAAc;AAAEL,MAAAA,KAAK,EAAEE;AAAT,KAAd;;AAEA,QAAI;AACF,UAAIA,aAAa,KAAK,IAAtB,EAA4B;AAC1BI,QAAAA,KAAK,WAAIX,GAAJ,oBAAwB;AAC3BY,UAAAA,MAAM,EAAE,KADmB;AAE3BC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEP,wCAAqBN,aAArB,CAFO;AAGPO,YAAAA,aAAa,mBAAYP,aAAZ;AAHN;AAFkB,SAAxB,CAAL,CAQGQ,IARH,CAQQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARf,EAUGF,IAVH,CAUQG,IAAI,IAAI;AACZ,cAAIA,IAAI,CAACC,OAAL,KAAiB,IAArB,EAA2B;AACzBC,YAAAA,KAAK,CAACF,IAAI,CAACG,OAAN,CAAL;AACA,iBAAKlB,KAAL,CAAWP,QAAX;AACD;AACF,SAfH,EAiBG0B,KAjBH,CAiBSC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAjBhB;AAkBD,OAnBD,MAmBO,IAAIhB,aAAa,KAAK,IAAtB,EAA4B;AACjC,eAAO,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF,KAvBD,CAuBE,OAAOmB,KAAP,EAAc;AACdF,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ,EAAmB,kBAAnB;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM,KAAKxB,KAAL,CAAWyB,KAAX,KAAqB,IAArB,GAA4B,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5B,GAAsC,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5C,CAAP;AACD;;AA3C2B;AA8C9B;;;;;;;AAKA,MAAMC,eAAe,GAAGzB,KAAK,IAAI;AAC/B,SAAO;AACLwB,IAAAA,KAAK,EAAExB,KAAK,CAACwB,KAAN,CAAYE;AADd,GAAP;AAGD,CAJD;AAMA;;;;;;;AAMA,eAAe/B,OAAO,CACpB8B,eADoB,EAEpB;AAAEjC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAFoB,CAAP,CAGbI,KAHa,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Login from \"./Login/index\";\nimport { loginNow, logoutNow } from \"../actions/actions\";\nimport App from \"./App/index\";\nimport { connect } from \"react-redux\";\nimport { url } from \"../config\";\n\nclass index extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      token: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    let receivedToken = localStorage.getItem(\"user_token\");\n    this.setState({ token: receivedToken });\n\n    try {\n      if (receivedToken !== null) {\n        fetch(`${url}/api/admin/me`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": `${receivedToken}`,\n            Authorization: `Bearer ${receivedToken}`\n          }\n        })\n          .then(res => res.json())\n\n          .then(data => {\n            if (data.success === true) {\n              alert(data.message);\n              this.props.loginNow();\n            }\n          })\n\n          .catch(err => console.log(err));\n      } else if (receivedToken === null) {\n        return <Login />;\n      }\n    } catch (error) {\n      console.log(error, \"this is an error\");\n    }\n  }\n\n  render() {\n    return <div>{this.props.login === true ? <App /> : <Login />}</div>;\n  }\n}\n\n/**\n|--------------------------------------------------\n| calls the login state from the login reducer\n|--------------------------------------------------\n*/\nconst mapStateToProps = state => {\n  return {\n    login: state.login.isLoggedIn\n  };\n};\n\n/**\n|--------------------------------------------------\n| connects the state and dispatch to the screen index\n|--------------------------------------------------\n*/\n\nexport default connect(\n  mapStateToProps,\n  { loginNow, logoutNow }\n)(index);\n"]},"metadata":{},"sourceType":"module"}